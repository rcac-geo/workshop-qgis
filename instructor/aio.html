<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Hands-on with QGIS: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/rcac/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/rcac/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/rcac/favicon-16x16.png">
<link rel="manifest" href="../favicons/rcac/site.webmanifest">
<link rel="mask-icon" href="../favicons/rcac/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav rcac"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="rcac-logo" alt="Lesson Description" src="../assets/images/rcac-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav rcac" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="../assets/images/rcac-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Hands-on with QGIS
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Hands-on with QGIS
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference and Additional Reading</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Hands-on with QGIS
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress rcac">
    <div class="progress-bar rcac" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="project.html">2. Project</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="coding.html">3. Coding</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference and Additional Reading</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2025-03-04 |

        <a href="https://github.com/rcac-geo/workshop-qgis/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 13 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why QGIS?</li>
<li>How to start QGIS on HPC Clusters?</li>
<li>How to load and visualize data in QGIS?</li>
<li>How to process and export data in QGIS?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain why we should use QGIS</li>
<li>Demonstrate how to start QGIS on HPC Clusters</li>
<li>Demonstrate how to load and visualize data in QGIS</li>
<li>Demonstrate how to process and export data in QGIS</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction-to-qgis">Introduction to QGIS<a class="anchor" aria-label="anchor" href="#introduction-to-qgis"></a>
</h2>
<hr class="half-width">
<p>GIS stands for ‘Geographical Information System’. We can use a GIS
application, such as ArcGIS and QGIS to manipulate spatial
information.</p>
<p>QGIS is a free and open-source software that runs on various
operating systems. It offers a wide range of functionality, such as
vector and raster analysis, geoprocessing, geocoding, georeferencing,
web mapping, and 3D visualization. QGIS also supports many data formats
and standards, such as Shapefile, GeoTIFF, GeoJSON, WMS, WFS, and
PostGIS.</p>
<p>Why QGIS? It’s free and flexible.</p>
<ol style="list-style-type: decimal">
<li>Cost-free: Enjoy QGIS without any financial burden. It’s completely
free, no hidden fees.</li>
<li>Free as in “Do It Your Way”: You could extend QGIS to meet your
specific needs, sponsor development or contribute your own code.</li>
<li>Works where you work: Run QGIS on macOS, Windows, and Linux (so
available for HPC Clusters).</li>
<li>Always getting better: Benefit from rapid development because anyone
can add new features and improve on existing ones.</li>
<li>Never get stuck: Access extensive documentation and a large and
active supportive community is there for help.</li>
<li>Easily integrate Artificial Intelligence (AI) and GeoAI.</li>
</ol></section><section><h2 class="section-heading" id="open-qgis-on-clusters">Open QGIS on Clusters<a class="anchor" aria-label="anchor" href="#open-qgis-on-clusters"></a>
</h2>
<hr class="half-width">
<p>We can start QGIS via ThinLinc Client or Gateway.</p>
<div class="section level4">
<h4 id="start-qgis-via-thinlinc">1. Start QGIS via ThinLinc<a class="anchor" aria-label="anchor" href="#start-qgis-via-thinlinc"></a>
</h4>
<p>Follow up with <a href="https://rcac-geo.github.io/workshop-qgis/index.html#software-setup" class="external-link">the
Setup page</a>, and connect with ThinLinc. There are two ways to start
QGIS via ThinLinc. The two ways are fundamentally the same but one is
interactive, and the other is typing code.</p>
<div class="section level5">
<h5 id="interactive-way">(1) Interactive Way<a class="anchor" aria-label="anchor" href="#interactive-way"></a>
</h5>
<p>To open QGIS as an interactive job, we could go to “Cluster Software”
and select “QGIS”, as the figure below:</p>
<figure><img width="391" alt="Picture1" src="https://github.com/user-attachments/assets/1df48747-d717-442e-9af5-c25d4dc9f78d" class="figure mx-auto d-block"></figure><p>Then select the “workshop” queue as below:</p>
<figure><img width="406" alt="Screenshot 2025-02-24 at 4 15 16 PM" src="https://github.com/user-attachments/assets/72d72419-4484-4e6e-9fed-3ec2fdf4920d" class="figure mx-auto d-block"></figure><p>Then hit “No”:</p>
<figure><img width="529" alt="Screenshot 2025-02-24 at 4 15 41 PM" src="https://github.com/user-attachments/assets/e3ea5e98-e83e-4d77-ba9c-bba7c62fbea3" class="figure mx-auto d-block"></figure><p>Now input two cores and five minutes and hit Okay. You don’t need to
specifically request memory because memory will be relocated
proportional with cores. But if you do, include unit such as “4G”.</p>
<figure><img width="608" alt="Screenshot 2025-02-24 at 4 16 10 PM" src="https://github.com/user-attachments/assets/55a2b0be-3bc1-447c-a44d-04c4ec6a7e60" class="figure mx-auto d-block"></figure>
</div>
<div class="section level5">
<h5 id="typing-code-way">(2) Typing Code Way<a class="anchor" aria-label="anchor" href="#typing-code-way"></a>
</h5>
<p>We could start the Terminal as below:</p>
<figure><img width="186" alt="Screenshot 2025-02-25 at 9 51 03 AM" src="https://github.com/user-attachments/assets/c06429f8-15b6-4242-b416-080085cf8f23" class="figure mx-auto d-block"></figure><p>To look up QGIS module, we could do:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">module</span> spider qgis</span></code></pre>
</div>
<p>To start an interactive job and open QGIS:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">sinteractive</span> <span class="at">-A</span> workshop <span class="at">-N1</span> <span class="at">-c8</span> <span class="at">-t8:00:00</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">module</span> load qgis</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">qgis</span></span></code></pre>
</div>
</div>
</div>
<div class="section level4">
<h4 id="start-qgis-via-gateway">2. Start QGIS via Gateway<a class="anchor" aria-label="anchor" href="#start-qgis-via-gateway"></a>
</h4>
<p>Gateway, also named Open OnDemand, is a Web interface includes file
explorer, interactive apps including QGIS.​ We have to use our own
accounts to login Gateway, not the training accounts we used for this
workshop. Go to <a href="https://gateway.negishi.rcac.purdue.edu" class="external-link">Negishi Gateway</a>,
login with our purdue accounts (when we have account on Clusters) and
connect QGIS as the figure below.</p>
<figure><img width="911" alt="Screenshot 2025-02-25 at 10 05 05 AM" src="https://github.com/user-attachments/assets/f575bf3a-e6bd-468b-92ad-4a3b93405788" class="figure mx-auto d-block"></figure><div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>We could also open QGIS with Gateway, in the <a href="https://rcac-geo.github.io/workshop-qgis/introduction.html#typing-code-way" class="external-link">Typing
Code Way</a>. We could start a terminal as below.</p>
<figure><img src="https://github.com/user-attachments/assets/aac3d529-c726-4793-b3db-e90e55a260fc" alt="Start Terminal in Gateway" class="figure mx-auto d-block"><div class="figcaption">Start Terminal in Gateway</div>
</figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="view-spatial-data">View Spatial Data<a class="anchor" aria-label="anchor" href="#view-spatial-data"></a>
</h2>
<hr class="half-width">
<p>In Geographic Information Systems (GIS), data is primarily
represented in two fundamental formats: vector and raster.</p>
<div class="section level4">
<h4 id="vector-data">Vector Data<a class="anchor" aria-label="anchor" href="#vector-data"></a>
</h4>
<ul>
<li>Representation:
<ul>
<li>Vector data uses geometric objects—points, lines, and polygons—to
represent spatial features.</li>
<li>Points represent individual locations (e.g., a city, a tree).</li>
<li>Lines represent linear features (e.g., roads, rivers).</li>
<li>Polygons represent areas (e.g., lakes, buildings, administrative
boundaries).  </li>
</ul>
</li>
<li>Characteristics:
<ul>
<li>Precision: Vector data is excellent for representing discrete
features with clear boundaries, offering high precision.</li>
<li>Scalability: Vector data can be scaled up or down without losing
quality.</li>
<li>Data Storage: Typically, vector data requires less storage space
than raster data for representing discrete features.</li>
<li>Use Cases: Best suited for representing features with distinct
boundaries, such as roads, property lines, and political
boundaries.</li>
</ul>
</li>
<li>Vector File Types:
<ul>
<li>Shapefile (.shp): A very common geospatial vector data format for
GIS software. It actually consists of several files (.shp, .shx, .dbf,
etc.)</li>
<li>GeoJSON (.geojson): A popular open standard format that uses
JavaScript Object Notation (JSON) to represent geographic features.</li>
<li>KML/KMZ: Used by Google Earth for displaying geographic data.</li>
<li>File format is handled by GDAL/OGR package with a <a href="https://gdal.org/en/stable/drivers/vector/" class="external-link">full list</a>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="raster-data">Raster Data<a class="anchor" aria-label="anchor" href="#raster-data"></a>
</h4>
<ul>
<li>Representation:
<ul>
<li>Raster data represents spatial information as a grid of cells
(pixels). Each cell contains a value representing a specific attribute
(e.g., elevation, temperature, land cover).  </li>
</ul>
</li>
<li>Characteristics:
<ul>
<li>Continuous Data: Raster data is ideal for representing continuous
attributes, such as elevation, temperature, and satellite imagery.</li>
<li>Data Storage: Raster data can require significant storage space,
especially at high resolutions.</li>
<li>Analysis: Raster data is well-suited for spatial analysis involving
calculations and modeling.</li>
<li>Use Cases: Best suited for representing continuous surfaces, such as
elevation models, satellite imagery, and aerial photographs.</li>
</ul>
</li>
<li>Raster File Types:
<ul>
<li>TIFF: Basic image format, no geographic information.</li>
<li>GeoTIFF: A TIFF file with added geospatial metadata, enabling it to
be used in GIS applications.</li>
<li>COG (Cloud Optimized GeoTIFF): A type of GeoTIFF with a specific
data structure optimized for fast access in cloud environments, often
using tiled data storage.</li>
<li>File format is handled by GDAL/OGR package with a <a href="https://gdal.org/en/stable/drivers/raster/" class="external-link">full list</a>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="key-differences">Key Differences<a class="anchor" aria-label="anchor" href="#key-differences"></a>
</h4>
<ul>
<li>Structure: Vector data uses geometric shapes, while raster data uses
a grid of cells.</li>
<li>Data Type: Vector is for discrete features, raster is for continuous
phenomena.</li>
<li>Precision: Vector is generally more precise, while raster’s
precision depends on cell size.</li>
<li>Storage: Vector often uses less storage for discrete features.
Raster data storage size is heavily dependant on resolution.</li>
</ul>
</div>
<div class="section level4">
<h4 id="load-spatial-data">Load Spatial Data<a class="anchor" aria-label="anchor" href="#load-spatial-data"></a>
</h4>
<div class="section level5">
<h5 id="load-vector-data-from-files">(1) Load vector data from files<a class="anchor" aria-label="anchor" href="#load-vector-data-from-files"></a>
</h5>
<ul>
<li>Step1: Layer | Add Layer | Add Vector Layer</li>
</ul>
<figure><img width="554" alt="Picture2" src="https://github.com/user-attachments/assets/58bc28a8-7fe8-4dfd-8a54-495dbbfe1e6d" class="figure mx-auto d-block"></figure><ul>
<li>Step2: Input your path of “alaska.shp” and hit “add”</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/b68a9319-68f0-4502-9bb5-d3d6b87b33d0" class="figure mx-auto d-block"></figure><ul>
<li>Step 3: You will see the shapefile has been added to Layers as
below.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/c5ba1734-88ee-4cc8-a79c-dd2f2b0cb1fb" class="figure mx-auto d-block"></figure><div id="challenge-1-try-yourself" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-try-yourself" class="callout-inner">
<h3 class="callout-title">Challenge 1: Try yourself</h3>
<div class="callout-content">
<p>try yourself to add airports.shp to layers.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<figure><img width="613" alt="Picture3" src="https://github.com/user-attachments/assets/f4d958c0-3acb-42a9-855e-4505cbca2c04" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Whenever we load a data source, QGIS looks for usable CRS
information, for example, in the shapefile’s .prj file. If QGIS cannot
find any usable information, by default, it will ask you to specify the
CRS manually. This behavior can be changed by going
to Settings | Options | CRS to always use either the project CRS or a
default CRS.</p>
</div>
</div>
</div>
</div>
<div class="section level5">
<h5 id="load-csv-files">(2) Load CSV files<a class="anchor" aria-label="anchor" href="#load-csv-files"></a>
</h5>
<ul>
<li>Add Delimited Text Layer option available via the menu entry by
going to Layer | Add Layer | Add Delimited Text Layer </li>
</ul>
<figure><img width="893" alt="Screenshot 2025-02-25 at 2 41 23 PM" src="https://github.com/user-attachments/assets/4ccee5c6-a3d0-4292-8751-04b044d875b0" class="figure mx-auto d-block"></figure><ul>
<li>You will see the shapefile has been added to Layers as below.</li>
</ul>
<figure><img width="612" alt="Picture4" src="https://github.com/user-attachments/assets/db0dd043-5c42-48c2-b929-c48f24f010b6" class="figure mx-auto d-block"></figure>
</div>
<div class="section level5">
<h5 id="load-raster-files">(3) Load Raster files<a class="anchor" aria-label="anchor" href="#load-raster-files"></a>
</h5>
<ul>
<li>Step1: Layer | Add Layer | Add Raster Layer</li>
<li>Step2: Input your path of “landcover.img” and hit “add”</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/6566ea7f-8ca9-4def-96b3-ae16671039bf" class="figure mx-auto d-block"></figure><ul>
<li>Step 3: You will see the raster has been added to Layers as
below.</li>
</ul>
<figure><img width="428" alt="Picture5" src="https://github.com/user-attachments/assets/a849f162-7ad8-473b-a1e3-d6ad34a82e31" class="figure mx-auto d-block"></figure><div id="challenge-1-try-yourself-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-try-yourself-1" class="callout-inner">
<h3 class="callout-title">Challenge 1: Try yourself</h3>
<div class="callout-content">
<p>try yourself to add SR_50M_alaska_nad.tif (Hillshade GeoTiff) to
layers.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<figure><img src="https://github.com/user-attachments/assets/e10386e9-d1c0-4736-8b9e-6618cf1a5db4" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="challenge-2-a-question" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2-a-question" class="callout-inner">
<h3 class="callout-title">Challenge 2: A Question?</h3>
<div class="callout-content">
<p>Did you find anything weird about the Hillshade image showing
above?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Yep, the hillshade should be in the North instead of the South. Let’s
check data Properties and change looking.</p>
<figure><img src="https://github.com/user-attachments/assets/ff8ff053-8a82-4335-a06d-e4086adb8986" class="figure mx-auto d-block"></figure><figure><img src="https://github.com/user-attachments/assets/67208203-a4ac-40c6-838f-8fe9d0a3ae10" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="process-spatial-data">Process Spatial Data<a class="anchor" aria-label="anchor" href="#process-spatial-data"></a>
</h2>
<hr class="half-width">
<div class="section level4">
<h4 id="filter-vector-data">Filter Vector Data<a class="anchor" aria-label="anchor" href="#filter-vector-data"></a>
</h4>
<p>Scenario: My Grandma wants to have a trip in Alaska but doctor said
she shouldn’t go to places with high elevation due to the heart problem.
So I will find airports with low elevantion for her. For example, I
found the airport with elevation lower than 1000 ft.</p>
<p>Solution:</p>
<ul>
<li>Step1: Right click the data “airports” and select “Filter”</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/b330ca5e-42e5-4d01-b587-4e74762b0375" class="figure mx-auto d-block"></figure><ul>
<li>Step2: Select “ELEV” from “Fields”, and input the Specific Filter
Expression as below:</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/98e26b3a-6329-41eb-b769-3cb38434cce5" class="figure mx-auto d-block"></figure><ul>
<li>Step3: Hit “OK” and now only airport with elevation lower than 1000
ft show up.</li>
<li>Step4-Export data: right click the data and selelct “Export” | “Save
Features As”. Input information as figure below and hit “OK”.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/5be55894-3ede-42bd-a888-36efda92b202" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="raster-calculation">Raster Calculation<a class="anchor" aria-label="anchor" href="#raster-calculation"></a>
</h4>
<p>Scenario: I’d like find some sunny slope where my Grandma and I can
go skiing. So I found the places where Hillshade is smaller than 100,
for example.</p>
<p>Solution:</p>
<ul>
<li>Step1: Turn on the Processing Toolbox if it’s off, and Search
“Raster Calculator”.</li>
</ul>
<p><img src="https://github.com/user-attachments/assets/fb3965b0-0754-4f43-b7af-d9f30a4c1ac4" class="figure"><img src="https://github.com/user-attachments/assets/26b8ed3a-0484-4c83-be15-a50e89d9c5b9" class="figure"></p>
<ul>
<li>Step2: Input the “Input Layers”, “Expression”, “Output CRS”, and
“Calculated” as the Output file.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/50d49743-2cb9-466a-806e-a077f31629d0" class="figure mx-auto d-block"></figure><ul>
<li>Step3: Hit “Run” and change the looking of output.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/a6e51da6-479c-4008-ad97-05333452897d" class="figure mx-auto d-block"></figure><ul>
<li>You have already written out the output file. But if you didn’t, you
could always export the data via right clicking it and select “Export” |
“Save As”. Then input information as figure below and hit “OK”.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/8074e204-dc55-4533-af9b-0dc1e85fc0d0" class="figure mx-auto d-block"></figure><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>QGIS is a free and open-source software that runs on various
platforms, such as Windows, Mac, and Linux.</li>
<li>QGIS has a large and active community of users and developers who
contribute to its features, plugins, documentation, and support.</li>
<li>We can use QGIS via ThinLinc Client or Gateway on HPC Clusters.</li>
<li>We learned how to load and visualize vector and raster data.</li>
<li>We learned how to process data and export them.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-project"><p>Content from <a href="project.html">Project</a></p>
<hr>
<p>Last updated on 2025-03-06 |

        <a href="https://github.com/rcac-geo/workshop-qgis/edit/main/episodes/project.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is DEM?</li>
<li>What types of downstream information can be derived from a DEM?</li>
<li>What is the topographic landscape around Purdue?</li>
<li>What are the hydrological features around Purdue?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Define and explain the preliminary knowledge.</li>
<li>Show how to install plugins with QGIS.</li>
<li>Identify the types of downstream information that can be derived
from a DEM.</li>
<li>Demonstrate how to analyze topographic landscape and hydrological
features with QGIS.</li>
<li>Explain the process of converting raster data to vector data.</li>
<li>Demonstrate how to run multiple instances in one shot.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="preliminary-knowledge">Preliminary Knowledge<a class="anchor" aria-label="anchor" href="#preliminary-knowledge"></a>
</h2>
<hr class="half-width">
<figure><img src="https://github.com/user-attachments/assets/60561490-e645-482a-8078-cd81914be475" alt="Knowledge Graph" class="figure mx-auto d-block"><div class="figcaption">Knowledge Graph</div>
</figure><div class="section level4">
<h4 id="dem-digital-elevation-model">1. DEM (Digital Elevation Model):<a class="anchor" aria-label="anchor" href="#dem-digital-elevation-model"></a>
</h4>
<p>A DEM is essentially a 3D representation of a terrain’s surface. It’s
a raster dataset, meaning it’s made up of a grid of cells (pixels),
where each cell contains an elevation value.</p>
<ul>
<li>Think of it as a digital map that shows the height of the land at
every point.</li>
<li>DEMs are the foundation for creating slope, hillshade maps and
analyzing hydrology.</li>
<li>The DEM we used today is LiDAR (Light Detection and Ranging) data
with one meter resolution from <a href="https://apps.nationalmap.gov/downloader/" class="external-link">USGS</a>, which uses
laser pulses from aircraft or drones to measure terrain elevation
accurately.</li>
</ul>
</div>
<div class="section level4">
<h4 id="slope">2. Slope:<a class="anchor" aria-label="anchor" href="#slope"></a>
</h4>
<p>Slope refers to the steepness or gradient of the terrain. It’s
typically expressed in degrees (0 to 90) or as a percentage. A slope of
0 degrees indicates a flat surface, while a slope of 90 degrees
represents a vertical surface.</p>
<p>Slope maps are derived from DEMs and are useful for analyzing things
like:</p>
<ul>
<li>Erosion risk</li>
<li>Water runoff</li>
<li>Suitability for construction</li>
</ul>
</div>
<div class="section level4">
<h4 id="hillshade">3. Hillshade:<a class="anchor" aria-label="anchor" href="#hillshade"></a>
</h4>
<p>Hillshade refers to simulating how sunlight would illuminate the
terrain. It enhances the visualization of landforms by showing how light
and shadow interact with the surface. The hillshade effect is created by
setting an azimuth and vertical angle for a light source. The Azimuth is
the direction the light is coming from, and the vertical angle is the
angle of the light source above the horizon.</p>
<figure><img width="535" alt="Screenshot 2025-02-28 at 12 45 44 PM" src="https://github.com/user-attachments/assets/6ee78881-4395-4197-a73f-3c88d1245fbe" class="figure mx-auto d-block"></figure><p>Hillshade maps are also derived from DEMs and are valuable for:</p>
<ul>
<li>Visualizing terrain features and creating visually appealing
maps</li>
<li>Identifying subtle topographic details</li>
</ul>
</div>
<div class="section level4">
<h4 id="analyzing-hydrology">4. Analyzing hydrology<a class="anchor" aria-label="anchor" href="#analyzing-hydrology"></a>
</h4>
<p>The workflow: DEM Input → Fill Sinks → Flow Direction → Flow
Accumulation → Stream Extraction -&gt; Subbasins</p>
<ul>
<li>Before calculating flow, the DEM needs to be preprocessed to remove
any small depressions (sinks) that may trap water. These are often
errors in the data or natural terrain features that disrupt continuous
flow.</li>
<li>The flow direction represents the direction in which water will move
from each cell based on elevation. The most common method assigns flow
using the D8 algorithm, where water moves to the steepest downward slope
among the eight neighboring cells.</li>
<li>The flow accumulation raster represents the number of upstream cells
contributing flow to each cell. This helps identify areas with higher
accumulated flow, which can indicate potential stream paths.
<ul>
<li>Low accumulation values: Represent hilltops or ridges.</li>
<li>High accumulation values: Represent valleys or stream networks.</li>
</ul>
</li>
<li>Streams are extracted by applying a threshold to the flow
accumulation raster. A threshold defines the minimum number of
contributing cells required to form a stream.
<ul>
<li>Higher thresholds result in fewer, larger streams.</li>
<li>Lower thresholds detect smaller streams, but may introduce
noise.</li>
</ul>
</li>
<li>Last step is to extract Watersheds/Subbasins, an area of land that
drains all precipitation and surface runoff to a common outlet(such as a
river, lake, or ocean).
<ul>
<li><p>It is defined by topographic divides (ridges or hills) that
separate it from adjacent watersheds.</p></li>
<li><p>Watersheds can be small (for example, a stream watershed) or
large (covering multiple rivers).</p></li>
<li>
<p>Same concept as Catchments and Basins, but they are in different
scales:</p>
<p><strong>Basin</strong> → contains multiple →
<strong>Sub-Basins</strong> → made up of → <strong>Watersheds</strong> →
includes smaller → <strong>Catchments</strong></p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="wetness-index">5. Wetness Index<a class="anchor" aria-label="anchor" href="#wetness-index"></a>
</h4>
<p>The Wetness Index, often referred to as the Topographic Wetness Index
(TWI), is a terrain attribute that quantifies the propensity of a
location to accumulate water. It’s a crucial tool in hydrological and
ecological modeling, providing insights into soil moisture, runoff
potential, and habitat distribution.</p>
<ul>
<li><p>The TWI is based on the principle that areas with a large upslope
contributing area and a shallow slope are more likely to accumulate
water.</p></li>
<li><p>It combines information about the upslope contributing area (the
area that drains into a given point) and the slope gradient.</p></li>
<li><p>$ TWI = ln()$ where <span class="math inline">\(\alpha\)</span>
is specific catchment area (i.e. the upslope contributing area per unit
contour length), <span class="math inline">\(\beta\)</span> is the local
slope angle.</p></li>
</ul>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Load Data:</p>
<p>Let’s first load the two rasters in data directory.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<figure><img width="1003" alt="Screenshot 2025-03-04 at 2 21 14 PM" src="https://github.com/user-attachments/assets/c6e10ffc-1d6c-458d-aa8e-b415181acd22" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="install-plugins">Install Plugins<a class="anchor" aria-label="anchor" href="#install-plugins"></a>
</h2>
<hr class="half-width">
<div class="section level4">
<h4 id="install-quickmapservices">Install QuickMapServices<a class="anchor" aria-label="anchor" href="#install-quickmapservices"></a>
</h4>
<p>QuickMapServices (QMS) is a valuable plugin for QGIS that simplifies
the process of adding and using a vast array of online basemaps and web
mapping services.</p>
<ul>
<li>Go to Plugins | Manage and Install Plugins</li>
<li>Search “QuickMapSevices” and click “Install Plugin”</li>
<li>Now click “Search QMS” and search “Google Maps”, as below.</li>
</ul>
<figure><img width="1355" alt="Screenshot 2025-03-04 at 12 11 27 PM" src="https://github.com/user-attachments/assets/07c1ee52-da62-4c9f-8918-4f1b6f234117" class="figure mx-auto d-block"></figure><figure><img width="257" alt="Screenshot 2025-03-04 at 12 11 54 PM" src="https://github.com/user-attachments/assets/d7f3ddf9-624e-46a8-9267-120d63e56d5c" class="figure mx-auto d-block"></figure><figure><img width="278" alt="Picture6" src="https://github.com/user-attachments/assets/098c0340-c254-4bbd-ad98-21ca9cf31849" class="figure mx-auto d-block"></figure>
</div>
<div class="section level4">
<h4 id="install-whiteboxtools">Install WhiteboxTools<a class="anchor" aria-label="anchor" href="#install-whiteboxtools"></a>
</h4>
<p>WhiteboxTools is a powerful, open-source geospatial data analysis
platform that offers a wide range of geospatial analysis tasks including
DEM analysis, hydrological modeling and more.</p>
<ul>
<li>
<p>Step 1: Install WhiteboxTools for QGIS</p>
<ul>
<li>go to Plugins | Manage and Install Plugins</li>
<li>search “WhiteboxTools for QGIS” and click “Install Plugin”</li>
</ul>
</li>
<li>
<p>Step 2: Install Whitebox Executables</p>
<ul>
<li>option 1: go to <a href="https://www.whiteboxgeo.com/download-direct/" class="external-link">WhiteboxTools</a>
and download.</li>
<li>option 2: run the command below:</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">wget</span> https://www.whiteboxgeo.com/WBT_Linux/WhiteboxTools_linux_amd64.zip</span></code></pre>
</div>
</li>
<li>
<p>Step 3: Unzip it by running</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">unzip</span> WhiteboxTools_linux_amd64.zip</span></code></pre>
</div>
</li>
<li>
<p>Step 4: Configurate it</p>
<ul>
<li><p>go to Settings | options | Processing | providers |
WhiteboxTools</p></li>
<li>
<p>go to WhiteboxTools executable and double click the content and
click “…” to set it as “whitebox_tools” in your unzipped directory(the
executable).</p>
<p>your executable should be as below (you can also copy and paste):</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">/home/trainXX/WhiteboxTools_linux_amd64/WBT/whitebox_tools</span></span></code></pre>
</div>
<figure><img width="1031" alt="Screenshot 2025-03-04 at 11 57 25 AM" src="https://github.com/user-attachments/assets/ca8d085c-05a4-4a2d-98b6-9cad9050bff5" class="figure mx-auto d-block"></figure>
</li>
</ul>
</li>
<li>
<p>Step 5: Now you could see WhiteboxTools show up at the bottom of
the Processing Toolbox as below.</p>
<figure><img width="256" alt="Screenshot 2025-03-04 at 12 07 08 PM" src="https://github.com/user-attachments/assets/bd000367-0013-4d19-b994-a1dd6e744a52" class="figure mx-auto d-block"></figure>
</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="merge-dem-data">Merge DEM Data<a class="anchor" aria-label="anchor" href="#merge-dem-data"></a>
</h2>
<hr class="half-width">
<ul>
<li>
<p>Search “merge” in Processing Toolbox as below</p>
<figure><img width="151" alt="image" src="https://github.com/user-attachments/assets/eb21a3ec-5ba2-4c53-94c1-dc26097bf189" class="figure mx-auto d-block"></figure>
</li>
<li><p>Select the two rasters as input</p></li>
</ul>
<figure><img width="612" alt="image" src="https://github.com/user-attachments/assets/0a29fa99-1799-4d19-91a6-2262bdcc324e" class="figure mx-auto d-block"></figure><ul>
<li>Type the output name in your scratch directory and hit “Run”.</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/3cc82073-b091-41d1-a955-c0aa40df1747" alt="Output file will be added to layers if you check “Open outputfile after running algorithm”" class="figure mx-auto d-block"><div class="figcaption">Output file will be added to layers if you check
“Open outputfile after running algorithm”</div>
</figure><ul>
<li>Now you could merged DEM in your Layers as below</li>
</ul>
<figure><img width="337" alt="image" src="https://github.com/user-attachments/assets/384ea49d-923c-4a0a-8f2b-b6e91bc217d4" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="calculate-slope">Calculate Slope<a class="anchor" aria-label="anchor" href="#calculate-slope"></a>
</h2>
<hr class="half-width">
<p>Search “Slope” in Processing Toolbox, select the elevation layer,
type the output file, and hit “Run” as below.</p>
<figure><img src="https://github.com/user-attachments/assets/631190c2-30e9-4fff-944a-7618c4f670ad" class="figure mx-auto d-block"></figure><div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Spend two minutes to explore the slope where your are familar and see
if it makes sense. For example, I used it to find a nice slope to snow
sled.</p>
<figure><img width="613" alt="image" src="https://github.com/user-attachments/assets/8984ebc8-b8ea-45d2-8af8-90af9132a639" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="calculate-hillshade">Calculate Hillshade<a class="anchor" aria-label="anchor" href="#calculate-hillshade"></a>
</h2>
<hr class="half-width">
<p>Search “Hillshade” in Processing Toolbox, and input the elevation
layer, parameters, and output as the figure below.</p>
<figure><img src="https://github.com/user-attachments/assets/fcddfdc5-0859-405d-873d-913f2ee6c1db" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="analyze-hydrology">Analyze Hydrology<a class="anchor" aria-label="anchor" href="#analyze-hydrology"></a>
</h2>
<hr class="half-width">
<div class="section level4">
<h4 id="fill-sinks">(1) Fill Sinks<a class="anchor" aria-label="anchor" href="#fill-sinks"></a>
</h4>
<ul>
<li>
<p>Step 1: type a few words to search “FillDepressionsWangAndLiu” as
below</p>
<figure><img src="https://github.com/user-attachments/assets/f6123400-3abe-4265-a011-9ef0cf7f0404" class="figure mx-auto d-block"></figure>
</li>
<li>
<p>Step 2: select dem, type output file, and hit “Run”</p>
<figure><img src="https://github.com/user-attachments/assets/fff8333b-59e8-4d56-9b81-8413314747d9" class="figure mx-auto d-block"></figure>
</li>
<li>
<p>Step 3: hit close after the progress reach 100%, as below</p>
<figure><img src="https://github.com/user-attachments/assets/7c4bdd9f-7902-460c-bbd9-2f6af9c0bd6e" class="figure mx-auto d-block"></figure>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="flow-direction">(2) Flow Direction<a class="anchor" aria-label="anchor" href="#flow-direction"></a>
</h4>
<ul>
<li>Step 1: search “d8” to find “D8Pointer” in the Processing
Toolbox.</li>
<li>Step 2: select “fillsinks” outputed from above procedure as the
input DEM file and type the output as below</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/16a3ccc4-a910-4c55-a812-94ab3bbe66a0" class="figure mx-auto d-block"></figure><ul>
<li>Step 3: hit close after the progress reach 100%; you will see the
flowdirection layer has been added to Layers.</li>
</ul>
</div>
<div class="section level4">
<h4 id="flow-accumulation">(3) Flow Accumulation<a class="anchor" aria-label="anchor" href="#flow-accumulation"></a>
</h4>
<ul>
<li>Step 1: type a few words to search “D8FlowAccumulation” in the
Processing Toolbox.</li>
<li>Step 2: select “flowdirec” outputed from above procedure as the
input and type output</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/5ff0050b-f064-46ef-b2fa-e698a2d4f925" alt="check “Is input the D8 flow pointer”" class="figure mx-auto d-block"><div class="figcaption">check “Is input the D8 flow pointer”</div>
</figure><ul>
<li>Step 3: hit close after the progress reach 100%; you will see the
flowaccum layer has been added to Layers.</li>
</ul>
</div>
<div class="section level4">
<h4 id="extract-streams">(4) Extract Streams<a class="anchor" aria-label="anchor" href="#extract-streams"></a>
</h4>
<ul>
<li><p>Step 1: search “ExtractStreams” in the Processing
Toolbox.</p></li>
<li>
<p>Step 2: select “flowaccum” outputed from above procedure as the
input and type output, set the Channelization Threshold as 1000,000, as
below</p>
<figure><img src="https://github.com/user-attachments/assets/78cec102-ddaf-42dc-ac85-015b1e487435" class="figure mx-auto d-block"></figure>
</li>
<li><p>Step 3: hit close after the progress reach 100%; you will see the
stream10_6 layer has been added to Layers.</p></li>
</ul>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>To better see the streams, you could uncheck other layers except the
google map layer, and zoom in to compare the generated streams with the
ones on the map.</p>
<p>Or we have convert it to vector: Go to Raster | Conversion |
Polygonize (Raster to Vector), as below</p>
<figure><img src="https://github.com/user-attachments/assets/a66ba8b9-90c8-4996-9062-291162c9f7b5" class="figure mx-auto d-block"></figure><figure><img src="https://github.com/user-attachments/assets/70fa3c47-ce96-4256-9b2c-18cd91ee0a32" alt="you can choose different file format of vector" class="figure mx-auto d-block"><div class="figcaption">you can choose different file format of
vector</div>
</figure><div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Output </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<figure><img src="https://github.com/user-attachments/assets/3cf31f5f-78f4-427c-b045-e53013f5b33e" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Exercise </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>Try different Channelization Threshold and compared the extracted
streams. <img src="https://github.com/user-attachments/assets/c8d469dd-babe-44a8-8f48-e9800d0a79dd" class="figure"></p>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="watershed">(5) Watershed<a class="anchor" aria-label="anchor" href="#watershed"></a>
</h4>
<ul>
<li>Step 1: search “Subbasins” in the Processing Toolbox.</li>
<li>Step 2: select “flowdirect” as the D8 Pointer File, stream10_6 as
the InputStreams File and type output, as below</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/77487b6f-4abf-4f9c-927a-18bfdc883b44" class="figure mx-auto d-block"></figure><div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Output </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<figure><img src="https://github.com/user-attachments/assets/0f01bd47-2b98-4710-bd7e-b7c5e0e2adda" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<ul>
<li>You could also click “Run as Batch Process” and run multiple
instances in one shot, as below</li>
</ul>
<figure><img src="https://github.com/user-attachments/assets/f28bc6c8-aca3-4bbf-ab75-fc2163fb3086" class="figure mx-auto d-block"></figure><div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler4" aria-labelledby="headingSpoiler4">
<div class="accordion-body">
<p>All algorithms (including models) can be executed as a batch process.
That is, they can be executed using not just a single set of inputs, but
several of them, executing the algorithm as many times as needed. This
is useful when processing large amounts of data, since it is not
necessary to launch the algorithm many times from the toolbox.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="calculate-topographic-wetness-index">Calculate Topographic Wetness Index<a class="anchor" aria-label="anchor" href="#calculate-topographic-wetness-index"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>Step 1: search “WetnessIndex” in the Processing Toolbox.</p></li>
<li>
<p>Step 2: select “subbasins10_6” calculated from the above
procedure as the SCA File, slope as the Input Slope File and type
output, as below</p>
<figure><img src="https://github.com/user-attachments/assets/1ae7032a-7a75-44b2-bffa-cf190da3f961" class="figure mx-auto d-block"></figure>
</li>
<li>
<p>Step 3: After the calculation finishs, right click the output
Layer, and select “Properties” and set as below</p>
<figure><img src="https://github.com/user-attachments/assets/89f4f76f-5356-4c50-83c4-80de46a1dd06" class="figure mx-auto d-block"></figure>
</li>
</ul>
<div id="output-2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="output-2" class="callout-inner">
<h3 class="callout-title">Output</h3>
<div class="callout-content">
<figure><img src="https://github.com/user-attachments/assets/ee910f75-b1d1-439b-800d-7bc79a023dc4" class="figure mx-auto d-block"></figure><div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Exercise </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler5" aria-labelledby="headingSpoiler5">
<div class="accordion-body">
<p>the smaller Channelization Threshold is, the more channels you
generated, and the high resolution you got (As below shows more accurate
Wetness Index)</p>
<figure><img src="https://github.com/user-attachments/assets/cfb23011-aab6-4214-98dc-6b8874c0a679" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>DEMs are the foundation for creating slope, hillshade maps and
analyzing hydrology.</li>
<li>Install plugins with QGIS, for example, QuickMapServices (QMS)
offers a variety of base maps and WhiteboxTools offers a wide range of
geospatial analysis tasks.</li>
<li>Demonstrate how to analyze topographic landscape and hydrological
features with QGIS.</li>
<li>We can choose different file format to vectorize raster data.</li>
<li>“Run as Batch Process” can run multiple instances in one shot.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-coding"><p>Content from <a href="coding.html">Coding</a></p>
<hr>
<p>Last updated on 2025-03-10 |

        <a href="https://github.com/rcac-geo/workshop-qgis/edit/main/episodes/coding.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 12 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is QGIS Python Console?</li>
<li>How to automate geospatial tasks with QGIS?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Demonstrate how to use QGIS Python Console.</li>
<li>Demonstrate how to automate QGIS tasks with Python coding and using
processing from the command line.</li>
<li>Demonstrate how to monitor CPU and memory usage.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="qgis-python-console">QGIS Python Console<a class="anchor" aria-label="anchor" href="#qgis-python-console"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>The QGIS Python Console is an interactive shell for Python
command executions.</p></li>
<li><p>It also has a Python file editor that allows you to edit and save
your Python scripts.</p></li>
<li>
<p>Modules from QGIS (analysis, core, gui, server, processing, 3d)
and Qt (QtCore, QtGui, QtNetwork, QtWidgets, QtXml) as well as Python’s
math, os, re and sys modules are already imported and can be used
directly.</p>
<p>The screenshots below show how to open QGIS Python Console, and how
it looks like.</p>
</li>
</ul>
<figure><img width="595" alt="Screenshot 2025-03-04 at 10 58 51 AM" src="https://github.com/user-attachments/assets/3157328b-18c8-43bf-b0a7-a434496de234" class="figure mx-auto d-block"></figure><figure><img width="1048" alt="Screenshot 2025-03-04 at 11 00 04 AM" src="https://github.com/user-attachments/assets/79248436-7123-46cc-814c-d09074375c7f" class="figure mx-auto d-block"></figure><p>Replace trainXX with your training account</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /scratch/negishi/trainXX/project/code_output</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># change work directory</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>path <span class="op">=</span><span class="st">"/scratch/negishi/trainXX/project/code_output"</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>os.chdir(path)</span></code></pre>
</div>
<div class="section level3">
<h3 id="load-data">Load Data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h3>
<p>There are two ways to load the data.</p>
<div class="section level4">
<h4 id="the-first-way">The first way<a class="anchor" aria-label="anchor" href="#the-first-way"></a>
</h4>
<p>There are two steps to load data. * First, data is loaded in memory.
* Second, the data is added to QGIS map canvas. This is not
necessary.</p>
<div class="section level5">
<h5 id="load-vector-data">(1) Load Vector Data<a class="anchor" aria-label="anchor" href="#load-vector-data"></a>
</h5>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>vectorfile <span class="op">=</span><span class="st">"/scratch/negishi/liu4201/project/output/stream10_6.geojson"</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># The format is:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># vlayer = QgsVectorLayer(data_source, layer_name, provider_name)</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>vlayer <span class="op">=</span> QgsVectorLayer(vectorfile, <span class="st">"stream10_6"</span>, <span class="st">"ogr"</span>)</span></code></pre>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>When you create a QgsVectorLayer or QgsRasterLayer object, it’s just
a layer in memory. It doesn’t automatically get added to the QGIS map
canvas. You have more control over the layer’s properties and how it’s
loaded. You can even choose to not load it. You can also set things like
the layer’s CRS, geometry type, and other options before adding it to
the map.</p>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> vlayer.isValid():</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Layer failed to load!"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    QgsProject.instance().addMapLayer(vlayer) <span class="co"># load the layer</span></span></code></pre>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>Now it get added to the QGIS map canvas.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level5">
<h5 id="load-raster-data">(2) Load Raster Data<a class="anchor" aria-label="anchor" href="#load-raster-data"></a>
</h5>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># use the firt way to load rasterfile 1</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># load raster to memory</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>path_to_tif <span class="op">=</span> rasterpath <span class="op">+</span> <span class="st">"USGS_1M_16_x50y448_IN_Indiana_Statewide_LiDAR_2017_B17.tif"</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>rlayer <span class="op">=</span> QgsRasterLayer(path_to_tif, <span class="st">"dem"</span>)</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># added raster to the QGIS map canvas</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> rlayer.isValid():</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Layer failed to load!"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    QgsProject.instance().addMapLayer(rlayer) <span class="co"># load the layer</span></span></code></pre>
</div>
</div>
</div>
<div class="section level4">
<h4 id="the-second-way">The second way<a class="anchor" aria-label="anchor" href="#the-second-way"></a>
</h4>
<div class="section level5">
<h5 id="load-vector-data-1">(1) Load Vector Data<a class="anchor" aria-label="anchor" href="#load-vector-data-1"></a>
</h5>
<p>It loads a vector or raster layer and immediately adds it to the map
canvas</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>vlayer <span class="op">=</span> iface.addVectorLayer(vectorfile, <span class="st">"stream10_6"</span>, <span class="st">"ogr"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> vlayer:</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">"Layer failed to load!"</span>)</span></code></pre>
</div>
</div>
<div class="section level5">
<h5 id="load-raster-data-1">(2) Load Raster Data<a class="anchor" aria-label="anchor" href="#load-raster-data-1"></a>
</h5>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">#use the second way to load rasterfile 2</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>path_to_tif2 <span class="op">=</span> rasterpath <span class="op">+</span> <span class="st">"USGS_1M_16_x50y449_IN_Indiana_Statewide_LiDAR_2017_B17.tif"</span>   </span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>iface.addRasterLayer(path_to_tif2, <span class="st">"dem2"</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="merge-dem-data">Merge DEM Data<a class="anchor" aria-label="anchor" href="#merge-dem-data"></a>
</h3>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>rlayer <span class="op">=</span> QgsRasterLayer(path_to_tif, <span class="st">"dem"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>rlayer2 <span class="op">=</span> QgsRasterLayer(path_to_tif2, <span class="st">"dem2"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Merge rasters</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>processing.run(<span class="st">"gdal:merge"</span>, {<span class="st">"INPUT"</span>: [rlayer, rlayer2], <span class="st">"OUTPUT"</span>: <span class="st">"merged_dem.tif"</span>})</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#check the merged_dem</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>iface.addRasterLayer(<span class="st">"merged_dem.tif"</span>,<span class="st">"merged_dem"</span>)</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="calculate-slope">Calculate Slope<a class="anchor" aria-label="anchor" href="#calculate-slope"></a>
</h3>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Calcualting slope</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>processing.run(<span class="st">"qgis:slope"</span>, {<span class="st">"INPUT"</span>: <span class="st">"merged_dem.tif"</span>, <span class="st">"OUTPUT"</span>: <span class="st">"slope.tif"</span>})</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#check it </span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>iface.addRasterLayer(<span class="st">"slope.tif"</span>,<span class="st">"slope"</span>)</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="calculate-hillshade">Calculate Hillshade<a class="anchor" aria-label="anchor" href="#calculate-hillshade"></a>
</h3>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>processing.run(<span class="st">"native:hillshade"</span>, {<span class="st">'INPUT'</span>:<span class="st">'merged_dem.tif'</span>,<span class="st">'Z_FACTOR'</span>:<span class="dv">1</span>,<span class="st">'AZIMUTH'</span>:<span class="dv">300</span>,<span class="st">'V_ANGLE'</span>:<span class="dv">40</span>,<span class="st">'OUTPUT'</span>:<span class="st">'hillshade.tif'</span>})</span></code></pre>
</div>
<p>You may wonder how to easily write the python code to perform tasks.
Well, QGIS provide a smart way.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Hint </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p>Step 1: Search the processing in the Processing Toolbox(<a href="https://rcac-geo.github.io/workshop-qgis/project.html#calculate-hillshade" class="external-link">Hillshade
Processing Tool</a>) with QGIS interface, and fill in all the
parameters.</p>
<p>Step 2: Click “Advanced”, and select “Copy as Python Command”.</p>
<p>Step 3: Paste it to run in the python console.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-processing-from-the-command-line">Using processing from the command line<a class="anchor" aria-label="anchor" href="#using-processing-from-the-command-line"></a>
</h2>
<hr class="half-width">
<p>QGIS comes with a tool called QGIS Processing Executor which allows
you to run Processing algorithms and models (built-in or provided by
plugins) directly from the command line without starting QGIS Desktop
itself. To use it, Let first close QGIS application. We will submit a
job to HPC Cluster.</p>
<ul>
<li>Step 1: Let’s start a new file named “myhydrojob” and copy in the
code below.</li>
</ul>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#!/bin/sh -l</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co"># FILENAME:  myjob10_4</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#SBATCH -A workshop</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#SBATCH --ntasks=1</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=8 </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#SBATCH --time=00:10:00</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#SBATCH --job-name myhydro_job</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#SBATCH --output=/home/liu4201/jobs/hydro10_4.out</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#SBATCH --error=/home/liu4201/jobs/hydro10_4.out  </span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="ex">module</span> reset</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="ex">module</span> load qgis</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="ex">module</span> load monitor</span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="bu">export</span> <span class="va">QT_QPA_PLATFORM</span><span class="op">=</span>offscreen</span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="ex">monitor</span> cpu percent <span class="at">--sample-rate</span> 10 <span class="at">--total</span> <span class="op">&gt;</span> cpu.log <span class="kw">&amp;</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="ex">monitor</span> cpu memory <span class="at">--sample-rate</span> 10 <span class="at">--actual</span> <span class="at">-H</span> <span class="op">&gt;</span> mem.log <span class="kw">&amp;</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="va">workdir</span><span class="op">=</span>/scratch/negishi/liu4201/project/code_output</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:FillDepressionsWangAndLiu  <span class="at">--</span> dem=<span class="va">$workdir</span>/merged_dem.tif output=<span class="va">$workdir</span>/fillsinks.tif</span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:D8Pointer  <span class="at">--</span> dem=<span class="va">$workdir</span>/fillsinks.tif output=<span class="va">$workdir</span>/flowdirect.tif</span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:D8FlowAccumulation <span class="at">--distance_units</span><span class="op">=</span>meters <span class="at">--area_units</span><span class="op">=</span>m2 <span class="at">--ellipsoid</span><span class="op">=</span>EPSG:7030 <span class="at">--input</span><span class="op">=</span><span class="va">$workdir</span>/flowdirect.tif <span class="at">--out_type</span><span class="op">=</span>0 <span class="at">--log</span><span class="op">=</span>false <span class="at">--clip</span><span class="op">=</span>false <span class="at">--pntr</span><span class="op">=</span>true <span class="at">--esri_pntr</span><span class="op">=</span>false <span class="at">--output</span><span class="op">=</span><span class="va">$workdir</span>/flowaccum.tif</span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:ExtractStreams <span class="at">--distance_units</span><span class="op">=</span>meters <span class="at">--area_units</span><span class="op">=</span>m2 <span class="at">--ellipsoid</span><span class="op">=</span>EPSG:7030 <span class="at">--flow_accum</span><span class="op">=</span><span class="va">$workdir</span>/flowaccum.tif <span class="at">--threshold</span><span class="op">=</span>10000 <span class="at">--zero_background</span><span class="op">=</span>false <span class="at">--output</span><span class="op">=</span><span class="va">$workdir</span>/stream10_4.tif</span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:Subbasins <span class="at">--distance_units</span><span class="op">=</span>meters <span class="at">--area_units</span><span class="op">=</span>m2 <span class="at">--ellipsoid</span><span class="op">=</span>EPSG:7030 <span class="at">--d8_pntr</span><span class="op">=</span><span class="va">$workdir</span>/flowdirect.tif <span class="at">--streams</span><span class="op">=</span><span class="va">$workdir</span>/stream10_4.tif <span class="at">--esri_pntr</span><span class="op">=</span>false <span class="at">--output</span><span class="op">=</span><span class="va">$workdir</span>/subbasins10_4.tif</span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a><span class="ex">qgis_process</span> run wbt:WetnessIndex <span class="at">--distance_units</span><span class="op">=</span>meters <span class="at">--area_units</span><span class="op">=</span>m2 <span class="at">--ellipsoid</span><span class="op">=</span>EPSG:7030 <span class="at">--sca</span><span class="op">=</span><span class="va">$workdir</span>/subbasins10_4.tif <span class="at">--slope</span><span class="op">=</span><span class="va">$workdir</span>/slope.tif <span class="at">--output</span><span class="op">=</span><span class="va">$workdir</span>/wetnessIndex10_4.tif</span></code></pre>
</div>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Hint </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler4" aria-labelledby="headingSpoiler4">
<div class="accordion-body">
<p>Step 1: Search the processing in the Processing Toolbox with QGIS
interface, and fill in all the parameters.</p>
<p>Step 2: Click “Advanced”, and select “Copy as qgis_process
Command”.</p>
<p>Step 3: Paste it to run in the job script.</p>
</div>
</div>
</div>
</div>
<ul>
<li>Step 2: Then we could submit the job with typing the code below in
Terminal.</li>
</ul>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">sbatch</span> myhydrojob</span></code></pre>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>monitor is a module to monitor your resources, such as cpu and
memory. You can look up for help after loading the module, as below.</p>
<p>To look up help for “monitor”, after “module load monitor”, run</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">monitor</span> <span class="at">--help</span></span></code></pre>
</div>
<p>To look up help for “qgis_process”, after “module load qgis”, run</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">qgis_process</span> <span class="at">--help</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="coding-with-standalone-python">Coding with Standalone Python<a class="anchor" aria-label="anchor" href="#coding-with-standalone-python"></a>
</h2>
<hr class="half-width">
<p>Now let’s experiment on a different Channelization Threshold, 10,000,
by coding with standalone Python Script.</p>
<ul>
<li>Step 1: Start a new python script named “hydro_10_5.py” and copy in
the code below. You should replace the path with your own where it is
noted in parenthesis.</li>
</ul>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="im">from</span> qgis.core <span class="im">import</span> <span class="op">*</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co"># initialize qgis</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>qgs_app <span class="op">=</span> QgsApplication([], <span class="va">False</span>)</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>qgs_app.initQgis()</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co">#add whiteboxTools path</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>module_path <span class="op">=</span> <span class="st">"/home/liu4201/apps/qgis_tools/WhiteboxTools_linux_amd64/WBT"</span>  (replace <span class="cf">with</span> your own)</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>sys.path.append(module_path)</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co">#import processing tools</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="im">import</span> whitebox <span class="im">as</span> wbtool</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="co">#from qgis import processing</span></span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a><span class="co">#from processing.core.Processing import Processing</span></span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a><span class="co">#Processing.initialize()</span></span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a><span class="co"># change work directory</span></span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>path <span class="op">=</span><span class="st">"/scratch/negishi/liu4201/project/code_output/"</span></span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>os.chdir(path)</span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a><span class="co">#for alg in QgsApplication.processingRegistry().algorithms():</span></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="co">#    print(alg.id(), "-&gt;", alg.displayName())</span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a>wbt <span class="op">=</span> wbtool.WhiteboxTools()</span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a></span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a><span class="co">#processing.run("native:hillshade", {'INPUT':'merged_dem.tif','Z_FACTOR':1,'AZIMUTH':300,'V_ANGLE':40,'OUTPUT':'hillshade.tif'})</span></span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a></span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a>wbt.extract_streams(flow_accum <span class="op">=</span> path <span class="op">+</span> <span class="st">"flowdirect.tif"</span>,</span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a>                   threshold<span class="op">=</span><span class="dv">100000</span>,</span>
<span id="cb16-32"><a href="#cb16-32" tabindex="-1"></a>                   zero_background<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb16-33"><a href="#cb16-33" tabindex="-1"></a>                   output<span class="op">=</span> path <span class="op">+</span> <span class="st">"stream10_5.tif"</span>)</span>
<span id="cb16-34"><a href="#cb16-34" tabindex="-1"></a>wbt.subbasins(d8_pntr<span class="op">=</span> path <span class="op">+</span> <span class="st">"flowdirect.tif"</span>, streams<span class="op">=</span> path <span class="op">+</span> <span class="st">"stream10_5.tif"</span>,esri_pntr<span class="op">=</span><span class="va">False</span>, output<span class="op">=</span> path <span class="op">+</span> <span class="st">"subbasins10_5.tif"</span>)</span>
<span id="cb16-35"><a href="#cb16-35" tabindex="-1"></a>wbt.wetness_index(sca<span class="op">=</span> path <span class="op">+</span> <span class="st">"subbasins10_5.tif"</span>, slope<span class="op">=</span> path <span class="op">+</span> <span class="st">"slope.tif"</span>, output<span class="op">=</span> path <span class="op">+</span> <span class="st">"wetnessIndex10_5.tif"</span>)</span>
<span id="cb16-36"><a href="#cb16-36" tabindex="-1"></a></span>
<span id="cb16-37"><a href="#cb16-37" tabindex="-1"></a>qgs_app.exitQgis()</span></code></pre>
</div>
<div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler5" aria-labelledby="headingSpoiler5">
<div class="accordion-body">
<p>Note 1: Refer <a href="https://www.whiteboxgeo.com/manual/wbt_book/available_tools/index.html" class="external-link">WhiteBoxTools
User Manual</a> for the code to use the algorithm, “Copy as Python
Command” provided by QGIS does not match the real WhiteBoxTools
algorithms.</p>
<p>Note 2: Refer to the code commented out in the snippet to use
processing tools provided by QGIS (for example, native:hillshade). To
highlight, it’s necessary to include the code below in the right
place.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="im">from</span> qgis <span class="im">import</span> processing</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="im">from</span> processing.core.Processing <span class="im">import</span> Processing</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>Processing.initialize()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<ul>
<li>Step 2: Start a file named “myjob10_5” and copy the code below in.
You should replace the path with your own where it is noted in
parenthesis.</li>
</ul>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">#!/bin/sh -l</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co"># FILENAME:  myjob10_5</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#SBATCH -A workshop</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#SBATCH --ntasks=1</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co">#SBATCH --cpus-per-task=8 </span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="co">#SBATCH --time=00:10:00</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co">#SBATCH --job-name myhydro_job</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="co">#SBATCH --output=/home/liu4201/jobs/hydro10_5.out  (replace with your own)</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#SBATCH --error=/home/liu4201/jobs/hydro10_5.out   (replace with your own)</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="ex">module</span> reset</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="ex">module</span> load qgis</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="ex">module</span> load monitor</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="bu">export</span> <span class="va">QT_QPA_PLATFORM</span><span class="op">=</span>offscreen</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="ex">monitor</span> cpu percent <span class="at">--sample-rate</span> 10 <span class="at">--total</span> <span class="op">&gt;</span> cpu1.log <span class="kw">&amp;</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="ex">monitor</span> cpu memory <span class="at">--sample-rate</span> 10 <span class="at">--actual</span> <span class="at">-H</span> <span class="op">&gt;</span> mem1.log <span class="kw">&amp;</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="ex">python</span> /home/liu4201/qgis_data/code/hydro_10_5.py  <span class="er">(</span><span class="ex">replace</span> with your own<span class="kw">)</span></span></code></pre>
</div>
<ul>
<li>Step 3: Submit your job via running the code below in terminal.</li>
</ul>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">sbatch</span> myjob</span></code></pre>
</div>
<div id="accordionSpoiler6" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler6" aria-expanded="false" aria-controls="collapseSpoiler6">
  <h3 class="accordion-header" id="headingSpoiler6">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Show details </h3>
</button>
<div id="collapseSpoiler6" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler6" aria-labelledby="headingSpoiler6">
<div class="accordion-body">
<p>The export QT_QPA_PLATFORM=offscreen command tells Qt (the GUI
framework used by QGIS) to use the “offscreen” platform plugin.</p>
</div>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/rcac-geo/workshop-qgis/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/rcac-geo/workshop-qgis/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/rcac-geo/workshop-qgis/" class="external-link">Source</a></p>
				<p><a href="https://github.com/rcac-geo/workshop-qgis/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:rcac-help@purdue.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/aseetharam/varnish/tree/db4f5c6f3c4799dfe8247fd057642c8099d5244b" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://rcac-geo.github.io/workshop-qgis/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "qgis, plugins, python console",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://rcac-geo.github.io/workshop-qgis/instructor/aio.html",
  "identifier": "https://rcac-geo.github.io/workshop-qgis/instructor/aio.html",
  "dateCreated": "2025-02-18",
  "dateModified": "2025-03-10",
  "datePublished": "2025-03-10"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

